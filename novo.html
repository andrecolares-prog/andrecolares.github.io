


<!--coment√°rio So para o Professor do meu curso que Vai Analizar o codigo -->


<!-- A maioria do codigo foi feito por IA e para min eu n√£o considero isso parte do site como avalia√ß√£o, esse codigo  so e para dar conplemento ao site que eu fiz -->

<!-- Esse codigo foi feito na epoca da qual curso que o nosso professor do curso Nos em sentivol a participar ele permitia fazer jogos com IA-->

<!-- ESSE CODIGO N PRESISA SER AVALIADO EU N√ÇO ESTOU REALMENTE UTILIZANDO ELE NO MEU SITE ESSE CODIGO E ANTIGO E FOI FEITO COM IA EU N√ÇO CONSIDERO COMO MEU CODIGO SO CONSIDERO COMO COMPLEMENTO-->

<!-- Mas eu mechi nele um pouco EX:Linha 21 a 28,59 a 63 so isso mesmo e o resto n√£o fui eu. -->

<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Top-down Shooter ‚Äî Classes</title>
<link rel="icon" href="FAVICON - Copia.ICO" type="image/x-icon">
<hr>
	<footer>
	<strong>
	                                               Jogo TESTE
	</strong>
	</footer>
	
<style>
html,body{height:100%;margin:0;background:#111;color:#eee;font-family:system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial}
#game{display:block;background:#0b0b0f;image-rendering:pixelated}
#ui{position:fixed;left:12px;top:12px;background:rgba(0,0,0,0.5);padding:8px;border-radius:8px;z-index:10}
#menu{position:fixed;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;background:#111;color:#eee;z-index:20}
.char-btn{padding:16px 32px;margin:12px;border:2px solid #eee;border-radius:12px;cursor:pointer;font-size:20px;}
.char-btn:hover{background:#333}
</style>
</head>
<body>
<canvas id="game" width="960" height="640"></canvas>
<div id="ui" style="display:none">
<div>Controles: WASD mover ‚Ä¢ Mouse mirar ‚Ä¢ Clique esquerdo atirar ‚Ä¢ H revelar armadilhas</div>
<div style="margin-top:6px">Classe: <span id="classe"></span> ‚Ä¢ Vida: <span id="hp">100</span> ‚Ä¢ Inimigos: <span id="enemies">0</span></div>
<div style="margin-top:6px"><button id="restart">Reiniciar</button></div>
</div>
<div id="menu">
<h1>Escolha sua Classe</h1>
<div>
<button class="char-btn" data-class="arqueiro">üèπ Arqueiro</button>
<button class="char-btn" data-class="guerreiro">üó°Ô∏è Guerreiro</button>
<button class="char-btn" data-class="mago">üîÆ Mago</button>
</div>
</div>
<hr>
<header>
 <link rel="stylesheet" type="text/css" href="STYLE2.CSS">
</header>

                                             <h3>Teste o Jogo</h3>
<ul>
<div class="menu">
    <a href="Site oficial.html" target="self"><button class="btn">Voltar</button></a>
</div>
</ul>

<script>
const canvas = document.getElementById('game');
const ctx = canvas.getContext('2d');
const W = canvas.width, H = canvas.height;
let keys={}, mouse={x:W/2,y:H/2,down:false};
let showTraps=false;
let player, bullets, enemies, traps, spawnTimer, score, classeSelecionada;

function randInt(a,b){return Math.floor(Math.random()*(b-a+1))+a}
function dist(a,b,c,d){const dx=a-c,dy=b-d;return Math.sqrt(dx*dx+dy*dy)}

function init(){
    player={x:W/2,y:H/2,spd:2.2,angle:0,hp:100,inv:0};
    if(classeSelecionada==='guerreiro'){ player.shield={count:5,cooldown:0,maxCooldown:400}; }
    bullets=[]; enemies=[]; traps=[]; score=0; spawnTimer=0;
    const cols=12,rows=8,tileW=W/cols,tileH=H/rows;
    for(let r=0;r<rows;r++) for(let c=0;c<cols;c++) if(Math.random()<0.18){
        traps.push({x:c*tileW+8,y:r*tileH+8,w:tileW-16,h:tileH-16,active:true,type:Math.random()<0.5?'spike':'mine'});
    }
    document.getElementById('hp').textContent=player.hp;
    document.getElementById('enemies').textContent=enemies.length;
    document.getElementById('classe').textContent=classeSelecionada.charAt(0).toUpperCase()+classeSelecionada.slice(1);
}

function spawnEnemy(){
    const side=randInt(0,3); let x=0,y=0;
    if(side===0){x=-20;y=Math.random()*H} 
    else if(side===1){x=W+20;y=Math.random()*H} 
    else if(side===2){x=Math.random()*W;y=-20} 
    else{ x=Math.random()*W;y=H+20 }
    
    const tipo=randInt(0,2);
    enemies.push({x,y,spd:tipo===0?2.0:tipo===1?1.2:0.8,hp:20,shootTimer: randInt(60,100),tipo,patrolAngle: Math.random()*Math.PI*2,orbes:[],projectiles:[]});
    document.getElementById('enemies').textContent=enemies.length;
}

function update(){
    let vx=0,vy=0; if(keys['w'])vy-=1;if(keys['s'])vy+=1;if(keys['a'])vx-=1;if(keys['d'])vx+=1;
    const m=Math.hypot(vx,vy)||1; vx=vx/m*player.spd; vy=vy/m*player.spd;
    player.x+=vx; player.y+=vy;
    player.x=Math.max(10,Math.min(W-10,player.x)); player.y=Math.max(10,Math.min(H-10,player.y));
    player.angle=Math.atan2(mouse.y-player.y, mouse.x-player.x);
    if(player.inv>0) player.inv--;

    // Cooldown do escudo
    if(player.shield){
        if(player.shield.count<=0){
            player.shield.cooldown--;
            if(player.shield.cooldown <= 0){
                player.shield.count = 5;
                player.shield.cooldown = player.shield.maxCooldown; // reset cooldown
            }
        }
    }

    if(mouse.down){ 
        if(!player.lastShot||performance.now()-player.lastShot>180){ shoot(); player.lastShot=performance.now(); } 
    }

    for(let i=bullets.length-1;i>=0;i--){ const b=bullets[i]; b.x+=b.dx; b.y+=b.dy; b.life=(b.life||0)+1; if(b.life>140) bullets.splice(i,1); }

    spawnTimer++; if(spawnTimer>120&&enemies.length<8){spawnTimer=0;spawnEnemy();}

    for(let i=enemies.length-1;i>=0;i--){
        const e=enemies[i];
        const angTo = Math.atan2(player.y-e.y, player.x-e.x);
        e.patrolAngle += (Math.random()-0.5)*0.1;
        const ang = e.tipo===1?angTo:angTo*0.6+e.patrolAngle*0.4;
        e.x += Math.cos(ang)*e.spd; e.y += Math.sin(ang)*e.spd;

        e.shootTimer--;
        if(e.tipo===0 && e.shootTimer<=0){
            e.shootTimer=randInt(60,160);
            const a=Math.atan2(player.y-e.y,player.x-e.x);
            bullets.push({x:e.x+Math.cos(a)*12,y:e.y+Math.sin(a)*12,dx:Math.cos(a)*4,dy:Math.sin(a)*4,from:'enemy'});
        }

        if(e.tipo===2 && e.shootTimer<=0){
            e.shootTimer=90;
            const angle=Math.random()*Math.PI*2;
            e.projectiles.push({x:e.x+Math.cos(angle)*16,y:e.y+Math.sin(angle)*16,target:player,speed:3});
        }

        for(let j=e.projectiles.length-1;j>=0;j--){
            const p=e.projectiles[j];
            const dx=p.target.x-p.x, dy=p.target.y-p.y;
            const m=Math.hypot(dx,dy)||1;
            p.x += dx/m*p.speed; p.y += dy/m*p.speed;

            // colis√£o com escudo
            if(classeSelecionada==='guerreiro' && player.shield && player.shield.count>0 && dist(player.x,player.y,p.x,p.y) < 60){
                e.projectiles.splice(j,1);
                player.shield.count--; // conta no escudo
                continue;
            }

            if(dist(p.x,p.y,player.x,player.y)<10){
                if(!player.shield || player.shield.count<=0){
                    if(player.inv===0){player.hp-=15; player.inv=60;}
                }else{
                    player.shield.count--; 
                }
                e.projectiles.splice(j,1); 
                continue;
            }

            for(let k=bullets.length-1;k>=0;k--){
                const b=bullets[k];
                if(b.from==='player' && dist(b.x,b.y,p.x,p.y)<10){ e.projectiles.splice(j,1); bullets.splice(k,1); break; }
            }
        }

        if(e.tipo===1 && dist(e.x,e.y,player.x,player.y)<20 && player.inv===0){ player.hp-=20; player.inv=60; }
        if(e.hp<=0){ e.projectiles=[]; enemies.splice(i,1); document.getElementById('enemies').textContent=enemies.length; }
    }

    for(let i=bullets.length-1;i>=0;i--){
        const b=bullets[i];
        if(b.from==='player'){
            for(let j=enemies.length-1;j>=0;j--){
                const e=enemies[j];
                if(dist(b.x,b.y,e.x,e.y)<12){ e.hp-=b.dmg; bullets.splice(i,1); break; }
            }
        }else if(dist(b.x,b.y,player.x,player.y)<12 && (!player.shield || player.shield.count<=0) && player.inv===0){
            player.hp-=8; player.inv=40; bullets.splice(i,1);
        }
    }

    if(classeSelecionada==='guerreiro'){
        for(let e of enemies){ if(dist(player.x,player.y,e.x,e.y)<40){ e.hp-=20; } }
    }

    for(let t of traps){ 
        if(!t.active) continue; 
        if(dist(player.x,player.y,t.x+t.w/2,t.y+t.h/2)<Math.max(t.w,t.h)/2) triggerTrap(t,'player'); 
        for(let e of enemies){if(dist(e.x,e.y,t.x+t.w/2,t.y+t.h/2)<Math.max(t.w,t.h)/2){triggerTrap(t,'enemy'); break;} }
    }

    document.getElementById('hp').textContent=player.hp;
    if(player.hp<=0) gameOver();
}

function shoot(){
    if(classeSelecionada==='arqueiro'){ const dmg=14, spd=7; bullets.push({x:player.x+Math.cos(player.angle)*14,y:player.y+Math.sin(player.angle)*14, dx:Math.cos(player.angle)*spd, dy:Math.sin(player.angle)*spd, from:'player', dmg}); }
    else if(classeSelecionada==='guerreiro'){ const dmg=20, range=30; for(let e of enemies){if(dist(player.x,player.y,e.x,e.y)<range)e.hp-=dmg;} }
    else if(classeSelecionada==='mago'){ const dmg=18, spd=5; bullets.push({x:player.x+Math.cos(player.angle)*14,y:player.y+Math.sin(player.angle)*14, dx:Math.cos(player.angle)*spd, dy:Math.sin(player.angle)*spd, from:'player', dmg, color:'#b86cff'}); }
}

function triggerTrap(t,who){ t.active=false; if(t.type==='spike'){ if(who==='player'){player.hp-=28; if(player.hp<=0)gameOver();} enemies.forEach(en=>{if(dist(en.x,en.y,t.x+t.w/2,t.y+t.h/2)<48) en.hp-=30;}); } else if(t.type==='mine'){ if(who==='player'){player.hp-=18;if(player.hp<=0)gameOver();} enemies.forEach(en=>{if(dist(en.x,en.y,t.x+t.w/2,t.y+t.h/2)<80) en.hp-=22;}); } }

function gameOver(){alert('Voc√™ morreu!'); init();}

function draw(){
    ctx.fillStyle='#0b0b0f'; ctx.fillRect(0,0,W,H);

    for(let t of traps){
        if(t.active&&showTraps){ctx.fillStyle=t.type==='spike'?'rgba(200,50,50,0.6)':'rgba(200,150,30,0.6)'; ctx.fillRect(t.x,t.y,t.w,t.h);}
        if(!t.active){ctx.fillStyle='rgba(120,120,120,0.15)'; ctx.fillRect(t.x,t.y,t.w,t.h);}
    }

    for(let e of enemies){
        ctx.beginPath(); ctx.arc(e.x,e.y,12,0,Math.PI*2);
        ctx.fillStyle='#d15a5a'; ctx.fill();
        ctx.fillStyle = e.tipo===1?'#00bfff':e.tipo===0?'#00ff00':'#a259ff';
        ctx.fillRect(e.x-6,e.y-2,12,4);
        if(e.tipo===2){ for(let orb of e.orbes){ orb.angle+=0.05; const ox = e.x + Math.cos(orb.angle)*18; const oy = e.y + Math.sin(orb.angle)*18; ctx.fillStyle='pink'; ctx.fillRect(ox-4,oy-4,8,8); }
        for(let p of e.projectiles){ ctx.beginPath(); ctx.moveTo(p.x-5,p.y+5); ctx.lineTo(p.x,p.y-5); ctx.lineTo(p.x+5,p.y+5); ctx.closePath(); ctx.fillStyle='magenta'; ctx.fill(); } }
    }

    for(let b of bullets){ctx.beginPath();ctx.arc(b.x,b.y,3,0,Math.PI*2);ctx.fillStyle=b.color||'#a2eaff';ctx.fill();}

    ctx.save(); ctx.translate(player.x,player.y); ctx.rotate(player.angle);
    let corFaixa='#00ff00'; if(classeSelecionada==='guerreiro')corFaixa='#00bfff'; if(classeSelecionada==='mago')corFaixa='#a259ff';
    ctx.fillStyle='#999'; ctx.fillRect(-6,-6,12,12);
    ctx.fillStyle=corFaixa; ctx.fillRect(-6,-2,12,4);

    if(classeSelecionada==='guerreiro' && player.shield && player.shield.count>0){
        ctx.beginPath(); ctx.arc(0,0,60,0,Math.PI*2);
        ctx.strokeStyle='rgba(0,191,255,0.7)'; ctx.lineWidth=3; ctx.stroke();
    }

    if(classeSelecionada==='arqueiro'){ctx.fillStyle='brown'; ctx.fillRect(8,-4,12,8);}
    else if(classeSelecionada==='guerreiro'){
        ctx.fillStyle='#654321'; ctx.fillRect(8,-2,10,4); // cabo
        ctx.fillStyle='#888888'; ctx.fillRect(18,-6,12,12); // cabe√ßa da marreta
    }
    else if(classeSelecionada==='mago'){ctx.fillStyle='purple'; const angle=performance.now()/500; const bx=Math.cos(angle)*20; const by=Math.sin(angle)*20; ctx.fillRect(bx-6,by-6,12,12);}
    ctx.restore();

    ctx.beginPath();ctx.arc(mouse.x,mouse.y,6,0,Math.PI*2);ctx.strokeStyle='rgba(255,255,255,0.25)';ctx.stroke();
}

window.addEventListener('keydown',e=>{keys[e.key.toLowerCase()]=true;if(e.key.toLowerCase()==='h')showTraps=!showTraps;});
window.addEventListener('keyup',e=>{keys[e.key.toLowerCase()]=false;});
canvas.addEventListener('mousemove',e=>{const r=canvas.getBoundingClientRect(); mouse.x=(e.clientX-r.left)*(canvas.width/r.width); mouse.y=(e.clientY-r.top)*(canvas.height/r.height);});
canvas.addEventListener('mousedown',()=>mouse.down=true); canvas.addEventListener('mouseup',()=>mouse.down=false);
document.getElementById('restart').addEventListener('click',()=>init());

function loop(){ if(classeSelecionada){update();draw();} requestAnimationFrame(loop);}
document.querySelectorAll('.char-btn').forEach(btn=>btn.onclick=()=>{classeSelecionada=btn.dataset.class; document.getElementById('menu').style.display='none'; document.getElementById('ui').style.display='block'; init();});
loop();
</script>

	
</body>
</html> 